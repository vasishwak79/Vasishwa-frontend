<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>School Lost & Found | Home</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>

<body>
  <header>
    <h1 class="site-title">School Lost & Found</h1>

    <nav class="nav-right">
      <a href="index.html" class="nav-btn active">Home</a>
      <a href="login.html" class="nav-btn" id="loginBtn">Login</a>

      <!-- User Dropdown (ONLY when logged in) -->
      <div id="user-menu" class="user-menu hidden">
        <button class="user-btn">
          <span id="username-display">User</span> ▼
        </button>
        <div class="dropdown-content">
          <a href="profile.html">Profile</a>
          <a href="#" id="logoutBtn">Logout</a>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <section class="home">
      <img 
        src="undraw_searching_no1g.svg"
        alt="Lost and Found"
        class="home-image"
      >

      <h2 class="home-title" style="color:white">
        Welcome to the School Lost and Found Website!
      </h2>

      <p class="home-subtitle" style="color:white">
        Lost something? Found something? Use this site to report found items, search for belongings, or claim what’s yours.
      </p>

      <div class="home-buttons">
        <a href="upload.html" class="home-btn">Report an Item</a>
        <a href="items.html" class="home-btn">Search for an Item</a>
      </div>

      <h2>Recently Added Items</h2>
      <div id="recent-items" class="item-grid"></div>
    </section>
  </main>

  <script>
    const userMenu = document.getElementById("user-menu");
    const usernameDisplay = document.getElementById("username-display");
    const loginBtn = document.getElementById("loginBtn");

    const username = localStorage.getItem("username");
    const userToken = localStorage.getItem("userToken");

    // If logged in
    if (username && userToken) {
      usernameDisplay.textContent = username;
      userMenu.classList.remove("hidden");
      loginBtn.style.display = "none";
    }

    // Logout
    const logoutBtn = document.getElementById("logoutBtn");
    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("username");
      localStorage.removeItem("userToken");
      window.location.reload();
    });
  </script>
</body>
</html>
